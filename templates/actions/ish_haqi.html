{% extends 'base.html' %}
{% load static %}

{% block content %}
    <section class="wrapper bg-gray">
        <div class="container py-4 py-md-6 text-center">
            <div class="row">
                <div class="col-lg-10 col-xxl-8 mx-auto">
                    <h1 class="display-1 mb-3">Ish haqini hisoblash</h1>
                </div>
                <!-- /column -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    <section class="wrapper bg-light">
        <div class="container pt-14 pt-md-16">
            <div class="col-12">
                <h3 class="mb-3">Avtomatik hisoblash</h3>
                <div class="form-floating mb-4 d-flex justify-content-between">
                    
                <div class="col-6">
                    <input id="ishHaqi" type="number" class="form-control" placeholder="Oylik maoshingizni kiriting?" required>
                </div>
                <div class="col-6">
                    <button class="btn btn-success mx-3 text-white" onclick="oylikAvtomatik()">Hisoblash</button>
                </div>
            </div>
                <div id="resultAvto" class="alert alert-success"></div>
            </div>
            <!-- /.form-floating -->
        </div>
        <hr>
        <div class="container">
            <div class="col-12">
                <h3 class="mb-3">Foizlarni qo'lda kiritish:</h3>
                <div class="form-floating mb-4 d-flex justify-content-between">
                    
                <div class="col-4">
                    <input id="ishHaqiRuchnoy" type="number" class="form-control" placeholder="Oylik maoshingizni kiriting?" required>
                </div>
                <div class="col-4">
                    <input id="daromadSoligi" type="number" class="form-control" placeholder="Daromad solig'ini kiriting. . ." required>
                </div>
                <div class="col-4">
                    <input id="kasabaUyushma" type="number" class="form-control" placeholder="Qo'shimcha soliqlarni kiriting. . ." required>
                </div>
               </div>
                <div class="col-12 mb-2">
                    <button class="btn btn-success mx-3 text-white" onclick="oylikRuchnoy()">Hisoblash</button>
                </div>
            
                <div id="resultRuchnoy" class="alert alert-success"></div>
            </div>
            <!-- /.form-floating -->
        </div>
    </section>
{% endblock content %}

{% block scripts %}
    <script>
    function oylikAvtomatik() {
        // Kiritilgan sonni olish
        let ishHaqi = document.getElementById('ishHaqi').value;
    
        // Oylikdan foizlarni olib tashlash
        let daromadSoligi = ishHaqi * 0.12;
        let kasabaUyushmaSoligi = ishHaqi * 0.01;
        let qolgaTegishi = ishHaqi - daromadSoligi - kasabaUyushmaSoligi;
    
        // Natijani ekranga chiqarish
        let resultElement = document.getElementById('resultAvto');
        resultElement.innerHTML = `Oylik maoshingiz: <b>${ishHaqi.toLocaleString()} so'm</b><br><br>
                                    Daromad solig'i: <b>${daromadSoligi.toLocaleString()} so'm</b><br>
                                    Kasaba uyushma solig'i: <b>${kasabaUyushmaSoligi.toLocaleString()} so'm</b><br>
                                    Qo'lga tegishi: <b>${qolgaTegishi.toLocaleString()} so'm!</b>`;
    }
    
    function oylikRuchnoy() {
        // Kiritilgan sonni olish
        let ishHaqi = document.getElementById('ishHaqiRuchnoy').value;
        let daromadSoligiFoiz = document.getElementById('daromadSoligi').value;
        let kasabaUyushmaFoiz = document.getElementById('kasabaUyushma').value;
        
        let daromadSoligi = ishHaqi * (daromadSoligiFoiz / 100);
        let kasabaUyushma = ishHaqi * (kasabaUyushmaFoiz / 100);
        let qolgaTegishi = ishHaqi - daromadSoligi - kasabaUyushma;
    
        // Natijani ekranga chiqarish
        let resultElement = document.getElementById('resultRuchnoy');
        resultElement.innerHTML = `Oylik maoshingiz: <b>${ishHaqi.toLocaleString()} so'm</b><br><br>
                                    Daromad solig'i: <b>${daromadSoligi.toLocaleString()} so'm</b><br>
                                    Kasaba uyushma solig'i: <b>${kasabaUyushma.toLocaleString()} so'm</b><br>
                                    Qo'lga tegishi: <b>${qolgaTegishi.toLocaleString()} so'm!</b>`;
    }
    </script>
{% endblock %}
